<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" >
    <meta name="description" content="
I’m Christopher Clarke and I write about Python, Django, Data Analysis,
Open Source and any other things that catch my fancy
">
<link rel="shortcut icon" href="http://blog.chrisdev.com/theme/images/favicons/favicon.ico">
<link rel="apple-touch-icon" sizes="57x57" href="http://blog.chrisdev.com/theme/images/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="114x114" href="http://blog.chrisdev.com/theme/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="http://blog.chrisdev.com/theme/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="144x144" href="http://blog.chrisdev.com/theme/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="60x60" href="http://blog.chrisdev.com/theme/images/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="120x120" href="http://blog.chrisdev.com/theme/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="76x76" href="http://blog.chrisdev.com/theme/images/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="152x152" href="http://blog.chrisdev.com/theme/images/favicons/apple-touch-icon-152x152.png">
<link rel="icon" type="image/png" href="http://blog.chrisdev.com/theme/images/favicons/favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="http://blog.chrisdev.com/theme/images/favicons/favicon-160x160.png" sizes="160x160">
<link rel="icon" type="image/png" href="http://blog.chrisdev.com/theme/images/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="http://blog.chrisdev.com/theme/images/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="http://blog.chrisdev.com/theme/images/favicons/favicon-32x32.png" sizes="32x32">
<meta name="msapplication-TileColor" content="#00aba9">
<meta name="msapplication-TileImage" content="http://blog.chrisdev.com/theme/images/favicons/mstile-144x144.png">
<meta name="msapplication-config" content="http://blog.chrisdev.com/theme/images/favicons/browserconfig.xml">    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800|Anonymous+Pro:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <title>How I Setup my Macs for Python Development</title>
 <link rel="stylesheet" href="http://blog.chrisdev.com/theme/css/foundation.css">
        <link rel="stylesheet" href="http://blog.chrisdev.com/theme/css/font-awesome.css">
        <link rel="stylesheet" href="http://blog.chrisdev.com/theme/tipuesearch/tipuesearch.css">
        <link rel="stylesheet" href="http://blog.chrisdev.com/theme/css/styles.css">
        <link rel="stylesheet" href="http://blog.chrisdev.com/theme/css/pygment.css">

     <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The ChrisDev Blog Atom Feed" />
 
    
    <script src="http://blog.chrisdev.com/theme/js/vendor/modernizr.js"></script>
    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>

<!-- Nav Bar -->

<div id="header">
    <div class="row hide-for-small">
        <div class="social large-12 columns">
            <li style="float: right; text-align: right; font-size: 22px; list-style: none;">
                <a href="http://twitter.com/realchrisdev"><i class="fa fa-twitter-square"></i></a>
                <a href="https://github.com/chrisdev"><i class="fa fa-github-square"></i></a>
                <a href="http://www.facebook.com/chrisdevtt"><i class="fa fa-facebook-square"></i></a>
            </li>
        </div>
    </div>
    <div id="logo" class="row">
        <div class="large-12 columns hide-for-small">
                <div class="large-4 medium-4 large-centered medium-centered columns text-center">
                    <img src="/theme/images/site_logo.png" alt="The ChrisDev Blog" />
                </div>
        </div>
    </div>
        <div data-magellan-expedition="fixed">
            <nav class="top-bar" data-topbar>
              <ul class="title-area">
                <li class="name show-for-small">
                    <h1><a href="/">The ChrisDev Blog</a></h1>
                </li>
                <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
              </ul>
            
              <section class="top-bar-section">
                <ul>                  
                        <li><a href="http://chrisdev.com/about/">About</a></li>
                        <li><a href="http://chrisdev.com/contact/">Contact Us</a></li>
                </ul>
              </section>
            </nav>
        </div>
</div>      

<!-- End Nav -->


<!-- Main Page Content -->
        <div id="main">
            
            <div id="content" class="row">
<article>
    <h1 class="article-title">How I Setup my Macs for Python Development</h1>
    <div class="info hide-for-small">
        <ul class="small-block-grid-3">
            <li><i class="fi-clock"></i>&nbsp;Thu 17 April 2014</li>
            <li><i class="fi-torso"></i>&nbsp;By&nbsp;<a href="http://blog.chrisdev.com/author/christopher-clarke.html"><strong>Christopher Clarke</strong></a></li>
            <li><i class="fi-marker"></i>&nbsp;Category&nbsp;<a href="http://blog.chrisdev.com/category/python.html"><strong>python</strong></a></li>
        </ul>
        <ul class="small-block-grid-1 tags">
                <li><i class="fi-marker"></i>&nbsp;Tags&nbsp;
 
                        <span class="label secondary round"><a href="http://blog.chrisdev.com/tag/python.html">Python</a></span>
 
                        <span class="label secondary round"><a href="http://blog.chrisdev.com/tag/development.html">Development</a></span>
 
                        <span class="label secondary round"><a href="http://blog.chrisdev.com/tag/os-x.html">OS X</a></span>
 
                        <span class="label secondary round"><a href="http://blog.chrisdev.com/tag/mavericks.html">Mavericks</a></span>
 
                        <span class="label secondary round"><a href="http://blog.chrisdev.com/tag/homebrew.html">homebrew</a></span>
                </li>
        </ul>
    </div>

    <div class="figure">
<img alt="This is a test" src="http://blog.chrisdev.com/images/setting-up-my-mac-for-python-dev.jpg" />
</div>
<p>I've been asked about this a few times already this month so I've decided to
write down what I do to set up a new Mac for (mainly) Python Development.</p>
<div class="section" id="first-install-dropbox-and-sync-folders">
<h2>First, Install Dropbox and Sync Folders</h2>
<p>I keep my development folders on <a class="reference external" href="http://dropbox.com">Dropbox</a>
as this gives me some degree of machine independence.
More recently,  I've also started to keep my <tt class="docutils literal">dotfiles</tt>
on <tt class="docutils literal">Dropbox</tt> and  use <a class="reference external" href="https://github.com/lra/mackup/">MackUp</a> to handle
the syncing of the <tt class="docutils literal">dotfiles</tt> between machines.
<tt class="docutils literal">MackUp</tt> is a pretty straight forward symbolic linking system and it
basically does what I would have done if I had rolled my own utility.
Be aware though that <tt class="docutils literal">Mackup's</tt> default behavior is to put your
<tt class="docutils literal">.ssh</tt> folder and its contents on Dropbox.
If you don't like this behavior then it must be overridden manually.  I always
start by installing <tt class="docutils literal">Dropbox</tt> and syncing my Development folders, as
I typically have lots of stuff of on <tt class="docutils literal">Dropbox</tt> so it takes a while to
sync everything.  You  may want to consider using  the
<a class="reference external" href="https://www.dropbox.com/help/175/en">Selective Sync</a>
feature to control the syncing process.</p>
</div>
<div class="section" id="upgrade-your-terminal-install-iterm-2">
<h2>Upgrade your Terminal: Install Iterm 2</h2>
<p>You're going to need a decent terminal application for your command line work.
While the bundled OS X terminal application has gotten a lot better
with recent releases of the <tt class="docutils literal">OS X</tt> it still has a way to go to match
<a class="reference external" href="http://www.iterm2.com/">Item2</a>. Some of the many features of <tt class="docutils literal">Iterm</tt>
are listed <a class="reference external" href="http://www.iterm2.com/#/section/features/full_screen">here</a>. So use
<a class="reference external" href="http://www.iterm2.com/">Item2</a> as your terminal.</p>
</div>
<div class="section" id="install-xcode-you-ll-need-at-least-the-command-line-tools">
<h2>Install XCode: You'll need at least the Command Line Tools</h2>
<p>You need to install either the full version <tt class="docutils literal">Xcode</tt> or at least to the
Command line tools.
These can be actually installed from the command line by entering the following
in you terminal window</p>
<div class="highlight"><pre>xcode-select --install
</pre></div>
<p>You will then be prompted to either install the full <tt class="docutils literal">Xcode</tt> or
just the command line developer tools, with the latter being the default.
Once you’ve installed one or the other, you can proceed to installing <tt class="docutils literal">Homebrew</tt>.</p>
</div>
<div class="section" id="install-homebrew">
<h2>Install Homebrew</h2>
<p><a class="reference external" href="http://brew.sh">Homebrew</a> is a package management system that simplifies
the installation of libraries, tools and utilities you typically need for
development.  <tt class="docutils literal">Homebrew</tt> is actually a Ruby application and to install it
just visit the <tt class="docutils literal">Homebrew</tt>
homepage copy and paste the code listed under <em>Install Homebrew</em> into your
terminal. The install snippet changes occasionally and it is currently</p>
<div class="highlight"><pre>ruby -e <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
<p>But be remember to visit <a class="reference external" href="http://brew.sh">Homebrew homepage</a> to get the
correct code snippet. Next run</p>
<div class="highlight"><pre>brew doctor
</pre></div>
<p>and then</p>
<div class="highlight"><pre>brew update
</pre></div>
<p>Then to install some packages to make sure everything works</p>
<div class="highlight"><pre>brew install ssh-copy-id git mercurial mackup
</pre></div>
</div>
<div class="section" id="set-up-your-shell-environment">
<h2>Set Up Your Shell Environment</h2>
<p>I'm a convert to  <tt class="docutils literal">Zsh</tt> or really
<a class="reference external" href="https://github.com/robbyrussell/oh-my-zsh/">oh-my-zsh</a>.  However,
the same would apply if you used <tt class="docutils literal">bash</tt> or any other shell
If you are using the bash shell then edit your <tt class="docutils literal">bash_profile</tt></p>
<div class="highlight"><pre>vi ~/.bash_profile
</pre></div>
<p>or for <tt class="docutils literal"><span class="pre">oh-my-zsh</span></tt></p>
<div class="highlight"><pre>vi  ~/.zshrc
</pre></div>
<p>Add the following lines</p>
<div class="highlight"><pre><span class="c"># set the architecture flags</span>
<span class="nb">export </span><span class="nv">ARCHFLAGS</span><span class="o">=</span><span class="s2">&quot;-arch x86_64&quot;</span>
<span class="c"># Ensure that local bin is first in path</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/bin:<span class="nv">$PATH</span>
</pre></div>
<p>These changes will take effect the next time you restart the shell.
Rather, than restarting your shell simply type the following in the terminal.</p>
<div class="highlight"><pre><span class="nb">source</span> ~/.zshrc
</pre></div>
<p>or if you are using <tt class="docutils literal">bash</tt></p>
<div class="highlight"><pre><span class="nb">source</span> ~/.bash_profile
</pre></div>
</div>
<div class="section" id="use-the-homebrew-python">
<h2>Use the Homebrew Python</h2>
<p>Apple has always bundled <tt class="docutils literal">Python</tt> along with its OS releases.
However, we advise you not to use the bundled <tt class="docutils literal">Python</tt> for development
and instead to install <tt class="docutils literal">Python</tt> via <tt class="docutils literal">homebrew</tt>. We prefer the <tt class="docutils literal">brew</tt>
Python for a number of reasons including :</p>
<ul class="simple">
<li>Apple makes changes to its bundled Python and this can
gives rise to bugs and incompatibilities.</li>
<li>If you use the bundled <tt class="docutils literal">Python</tt> you can upgrade to the latest and the
greatest version of <tt class="docutils literal">OS X</tt>  you may find that your packages,
<tt class="docutils literal">virtualenvs</tt> etc. may all need to be reinstalled and recreated</li>
<li>As new versions of <tt class="docutils literal">Python</tt> are released, the bundled <tt class="docutils literal">Python</tt> becomes
more and more out-of-date.  <tt class="docutils literal">Homebrew</tt> will allow you the upgrade to
the most recent versions of Python (2 or 3).</li>
<li><tt class="docutils literal">Homebrew</tt> allows you to easily play around with <tt class="docutils literal">Python 3</tt> as it comes
with <tt class="docutils literal">pip3</tt> for installing packages</li>
</ul>
<p>To install <tt class="docutils literal">Python</tt> with <tt class="docutils literal">homebrew</tt> enter</p>
<div class="highlight"><pre>brew install python
</pre></div>
<p>And optionally install Python 3</p>
<div class="highlight"><pre>brew install python3
</pre></div>
</div>
<div class="section" id="install-virtualenv-and-virtualenv-wrapper">
<h2>Install VirtualEnv and VirtualEnv Wrapper</h2>
<p>A <em>Virtual Environment</em>, is an isolated working copy of <tt class="docutils literal">Python</tt> and installed
packages that allows you to work on a specific project without the worry of
affecting other projects.</p>
<p>The <tt class="docutils literal">virtualenv</tt> package allows you to create virtual environments while the
<tt class="docutils literal">virtualenvwrapper</tt> package provides a framework for organizing
your virtual environments.  Install them using <tt class="docutils literal">pip</tt></p>
<div class="highlight"><pre>pip install virtualenv

pip install virtualenvwrapper
</pre></div>
<p>Next, create a directory to store your virtual environments</p>
<div class="highlight"><pre>mkdir -p ~/virtualenvs
</pre></div>
<p>We’ll then edit the <tt class="docutils literal"><span class="pre">~/.zshrc</span></tt> file or (<tt class="docutils literal">.bashrc</tt> or <tt class="docutils literal">.bash_profile</tt>)</p>
<div class="highlight"><pre>vim ~/.zshrc
</pre></div>
<p>and add the following lines to it</p>
<div class="highlight"><pre><span class="c"># cache pip-installed packages to avoid re-downloading</span>
<span class="nb">export </span><span class="nv">PIP_DOWNLOAD_CACHE</span><span class="o">=</span><span class="nv">$HOME</span>/.pip/cache

<span class="nb">export </span><span class="nv">WORKON_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/virtualenvs
<span class="nb">source</span> /usr/local/bin/virtualenvwrapper.sh
</pre></div>
<p>Restart your terminal or type the following in the terminal window</p>
<div class="highlight"><pre><span class="nb">source</span> ~/.zshrc
</pre></div>
<p>or</p>
<div class="highlight"><pre><span class="nb">source</span> ~/.bash_profile
</pre></div>
<p>Next, we want to test out your setup by building a <tt class="docutils literal">C</tt> based python package.
Start by installing some shared libraries via brew</p>
<div class="highlight"><pre>brew install libjpeg lcms libtiff libpng freetype
</pre></div>
<p>Next create a test <tt class="docutils literal">virtualenv</tt> and install the <tt class="docutils literal">C</tt> based python package
in this case <a class="reference external" href="https://pypi.python.org/pypi/Pillow/">Pillow</a> which
needs to be built against the shared libraries that you just installed
using <tt class="docutils literal">brew</tt></p>
<div class="highlight"><pre>mkvirtalenv <span class="nb">test</span>-env
pip install Pillow
</pre></div>
<p>Everything is fine if you get a post install message like similar to the
one shown below</p>
<pre class="literal-block">
PIL SETUP SUMMARY
--------------------------------------------------------------------
version      Pillow 2.4.0
platform     darwin 2.7.6 (default, Apr  9 2014, 11:48:52)
             [GCC 4.2.1 Compatible Apple LLVM 5.1 (clang-503.0.38)]
--------------------------------------------------------------------
--- TKINTER support available
--- JPEG support available
*** OPENJPEG (JPEG2000) support not available
--- ZLIB (PNG/ZIP) support available
--- LIBTIFF support available
--- FREETYPE2 support available
*** LITTLECMS2 support not available
*** WEBP support not available
*** WEBPMUX support not available
</pre>
</div>
<div class="section" id="extras">
<h2>Extras</h2>
<div class="section" id="postgresql">
<h3>PostgreSQL</h3>
<p>You can of course use <tt class="docutils literal">homebrew</tt> to install <tt class="docutils literal">PostgreSQL</tt>.
However, I've found that that it takes a lot of manual tweaking to get all
the procedural languages (<tt class="docutils literal">PL/pgSQL</tt>, <tt class="docutils literal">PL/Python</tt>, <tt class="docutils literal">PLV8</tt> etc.) as well
as extensions like <a class="reference external" href="http://postgis.net/">PostGIS</a>, <tt class="docutils literal">hstore</tt> etc.  working.
In contrast, <a class="reference external" href="http://postgresapp.com/">Postgresapp</a>
pretty much works out of the box and gives you stable, up-to-date version
PostgreSQL/PostGIS pretty much configured for any kind of development that
you are likely to do.  <tt class="docutils literal">Postgresapp</tt> also comes with
the full set of <tt class="docutils literal">PostgeSQL/PostGIS</tt> command line tools however, you need to
add the bin directory to your path. As before, depending on you shell
of choice add the following to your <tt class="docutils literal">.zshrc</tt> , <tt class="docutils literal">.bash_profile</tt> or
<tt class="docutils literal">.bashrc</tt></p>
<div class="highlight"><pre><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/usr/local/bin:/Applications/Postgres.app/Contents/MacOS/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</pre></div>
<p>Restart you terminal app or type the following in the terminal window</p>
<div class="highlight"><pre><span class="nb">source</span> ~/.zshrc
</pre></div>
<p>or if you use another shell example <tt class="docutils literal">bash</tt></p>
<div class="highlight"><pre><span class="nb">source</span> ~/.bash_profile
</pre></div>
<p>Finally, test out your setup by typing</p>
<div class="highlight"><pre>createdb <span class="nb">test</span>-db <span class="c">#create a new database</span>
psql <span class="nb">test</span>-db
dropdb <span class="nb">test</span>-db
</pre></div>
</div>
<div class="section" id="install-a-gui-version-control-client">
<h3>Install a GUI Version Control Client</h3>
<p>While we can use <tt class="docutils literal">Homebrew</tt> to install source control tools (i.e <tt class="docutils literal">git</tt>
and or <tt class="docutils literal">mercurical</tt>) many new developers, or those coming from backgrounds
in design can sometimes feel a bit intimidated by using
<tt class="docutils literal">git</tt> and <tt class="docutils literal">mecurical</tt> from the command line.
So to help them get over the hump we usually recommend they also install a free
<tt class="docutils literal">git</tt> and <tt class="docutils literal">mercurial</tt> GUI client such as
<a class="reference external" href="http://www.sourcetreeapp.com">SourceTree</a>.</p>
</div>
<div class="section" id="python-data-tools">
<h3>Python Data Tools</h3>
<p>Python is becomming more and more popular for statistics, data analysis and data
science tasks.  In particular you may be interested in in developing solutions
using the <a class="reference external" href="http://scipy.org">SciPy</a> stack and using tools like <a class="reference external" href="http://ipython.org">IPython</a>,
<a class="reference external" href="http://matplotlib.org">Matplotlib</a>, <a class="reference external" href="http://pydata.pandas.org">Pandas</a> , <a class="reference external" href="http://matplotlib">scikit-learn</a> , etc.  The usual recommendation
is to use a binary distribution such as <a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a> or <a class="reference external" href="https://www.enthought.com/downloads/">Enthought Canopy</a>, but
as a developer you will want/need to use the source distribution. Start by adding
these lines to your <tt class="docutils literal">.zshrc</tt> or <tt class="docutils literal">.bash_profile</tt>.</p>
<div class="highlight"><pre><span class="nb">export </span><span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;-arch i386 -arch x86_64&quot;</span>
<span class="nb">export </span><span class="nv">FFLAGS</span><span class="o">=</span><span class="s2">&quot;-m32 -m64&quot;</span>
<span class="nb">export </span><span class="nv">LDFLAGS</span><span class="o">=</span><span class="s2">&quot;-Wall -undefined dynamic_lookup -bundle -arch i386 -arch x86_64&quot;</span>
<span class="nb">export </span><span class="nv">CC</span><span class="o">=</span>gcc
<span class="nb">export </span><span class="nv">CXX</span><span class="o">=</span><span class="s2">&quot;g++ -arch i386 -arch x86_64&quot;</span>
</pre></div>
<p>This should take care of problems you can sometimes encounter in building
some <tt class="docutils literal">numpy</tt> and <tt class="docutils literal">scipy</tt> extensions.</p>
<p>Next install some of the perquisites libraries and applications using
<tt class="docutils literal">homebrew.</tt></p>
<div class="highlight"><pre>brew install gfortran pkg-config zeromq readline
</pre></div>
<p>Then install <tt class="docutils literal">numpy</tt> and <tt class="docutils literal">scipy</tt>  using pip. We will also install
<tt class="docutils literal">nose</tt> so we can run the test suite.</p>
<div class="highlight"><pre>pip install numpy
pip install scipy
pip install nose
</pre></div>
<p>Note, I'm installing these packages directly to the system site packages i.e.
in <tt class="docutils literal"><span class="pre">/usr/local/lib/python-2.7/site-packages</span></tt> as opposed to a
particular <tt class="docutils literal">virtualenv</tt> as I often use <tt class="docutils literal">pydata</tt> packages for ad-hoc
hacking and experimentation.
You can run the test suite by starting <tt class="docutils literal">Python</tt> and running</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">scipy</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="n">numpy</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
<span class="n">scipy</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
</pre></div>
<p>Almost all the <tt class="docutils literal">numpy</tt> test should pass but interestingly there will be quite
a few known failures with <tt class="docutils literal">scipy</tt>. This should not be a problem</p>
<p>Next install <tt class="docutils literal">pandas</tt></p>
<div class="highlight"><pre>pip install pandas
</pre></div>
<p>Then we can install <tt class="docutils literal">IPython</tt> (including support for the IPython notebook) ,
as well as <tt class="docutils literal">matplotlib</tt> and the <tt class="docutils literal">ipython sql extension</tt>
which allows you to to connect to a database and then issue SQL
commands within <tt class="docutils literal">IPython</tt> or <tt class="docutils literal">IPython Notebook</tt>.</p>
<div class="highlight"><pre>pip install jinga2
pip install ipython pyzmq tornado pygments
pip install matplotlib
pip install pycopg2
pip install ipython-sql
</pre></div>
<p>Check that everything is setup properly by launching the IPython notebook with
<tt class="docutils literal">matplotlib</tt> integration.</p>
<div class="highlight"><pre>ipython notebook --pylab<span class="o">=</span>inline
</pre></div>
<p>Here is a sample session from notebook I created</p>
<p>Start by importing <tt class="docutils literal">pandas</tt> and load the <tt class="docutils literal">sql</tt> magics</p>
<pre class="code python literal-block">
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="o">%</span><span class="n">load_ext</span> <span class="n">sql</span>
</pre>
<p>Connect to a <tt class="docutils literal">PosgreSQL</tt> database with data from the Trinidad and Tobago
stock exchange and execute sql</p>
<pre class="code python literal-block">
<span class="o">%%</span><span class="n">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">mass</span><span class="o">-</span><span class="n">db</span>
<span class="n">select</span> <span class="n">sd</span><span class="o">.</span><span class="n">dateix</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ticker</span><span class="p">,</span> <span class="n">sd</span><span class="o">.</span><span class="n">close_price</span><span class="p">,</span> <span class="n">sd</span><span class="o">.</span><span class="n">volume</span> <span class="kn">from</span> <span class="nn">markets_symboldata</span> <span class="nn">sd</span><span class="p">,</span> <span class="n">markets_symbol</span> <span class="n">s</span>
<span class="n">where</span> <span class="n">s</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">sd</span><span class="o">.</span><span class="n">symbol_id</span> <span class="n">order</span> <span class="n">by</span> <span class="n">sd</span><span class="o">.</span><span class="n">dateix</span> <span class="n">desc</span> <span class="n">limit</span> <span class="mi">10</span><span class="p">;</span>
</pre>
<pre class="literal-block">
10 rows affected.
</pre>
<table>
    <tr>
        <th>dateix</th>
        <th>ticker</th>
        <th>close_price</th>
        <th>volume</th>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>NCBJ</td>
        <td>1.0</td>
        <td>1901965</td>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>RBL</td>
        <td>116.52</td>
        <td>8109</td>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>GHL</td>
        <td>14.0</td>
        <td>4294</td>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>JMMB</td>
        <td>0.49</td>
        <td>18500</td>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>NEL</td>
        <td>18.25</td>
        <td>1348</td>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>NFM</td>
        <td>0.96</td>
        <td>15500</td>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>AHL</td>
        <td>11.0</td>
        <td>1000</td>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>FIRST</td>
        <td>42.4</td>
        <td>3891</td>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>CIF</td>
        <td>22.75</td>
        <td>3210</td>
    </tr>
    <tr>
        <td>2014-01-27 00:00:00-04:00</td>
        <td>SBTT</td>
        <td>73.12</td>
        <td>624</td>
    </tr>
</table><p>Execute another query using the connection established above to retrieve
the last 100 days of data for GHL. Store the result in a variable called
results</p>
<pre class="code python literal-block">
<span class="n">result</span> <span class="o">=</span> <span class="o">%</span><span class="n">sql</span> <span class="n">select</span> <span class="n">sd</span><span class="o">.</span><span class="n">dateix</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ticker</span><span class="p">,</span> <span class="n">sd</span><span class="o">.</span><span class="n">close_price</span><span class="p">,</span> <span class="n">sd</span><span class="o">.</span><span class="n">volume</span> <span class="kn">from</span> <span class="nn">markets_symboldata</span> <span class="nn">sd</span><span class="p">,</span> <span class="n">markets_symbol</span> <span class="n">s</span> <span class="n">where</span> <span class="n">s</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">sd</span><span class="o">.</span><span class="n">symbol_id</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">ticker</span><span class="o">=</span><span class="s">'GHL'</span> <span class="n">order</span> <span class="n">by</span> <span class="n">sd</span><span class="o">.</span><span class="n">dateix</span> <span class="n">desc</span> <span class="n">limit</span> <span class="mi">100</span>
</pre>
<pre class="literal-block">
100 rows affected.
</pre>
<p>Because pandas is available we can use the <tt class="docutils literal">DataFrame</tt> method to
create a DataFrame from the resultset</p>
<pre class="code python literal-block">
<span class="n">df</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre>
<pre class="literal-block">
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 100 entries, 0 to 99
Data columns (total 4 columns):
dateix         100 non-null object
ticker         100 non-null object
close_price    100 non-null float64
volume         100 non-null int64
dtypes: float64(1), int64(1), object(2)
</pre>
<p>Convert the <tt class="docutils literal">df</tt> to a time series by setting the index to the
<tt class="docutils literal">dateix</tt></p>
<pre class="code python literal-block">
<span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">'dateix'</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<p>Statistical summary of the closing price and volume</p>
<pre class="code python literal-block">
<span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre>
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>close_price</th>
      <th>volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td> 100.000000</td>
      <td>   100.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>  14.806300</td>
      <td> 11008.670000</td>
    </tr>
    <tr>
      <th>std</th>
      <td>   0.902168</td>
      <td> 16633.468579</td>
    </tr>
    <tr>
      <th>min</th>
      <td>  13.500000</td>
      <td>    21.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>  14.000000</td>
      <td>  1718.750000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>  14.975000</td>
      <td>  4447.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>  15.600000</td>
      <td> 12569.250000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>  16.450000</td>
      <td> 82430.000000</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 2 columns</p>
</div><p>Use <tt class="docutils literal">matplotlib</tt> to plot the closing price</p>
<pre class="code python literal-block">
<span class="n">df</span><span class="p">[</span><span class="s">'close_price'</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre>
<pre class="literal-block">
&lt;matplotlib.axes.AxesSubplot at 0x11650bcd0&gt;
</pre>
<div class="figure">
<img alt="map to buried treasure" src="/theme/images/output_13_1.png" />
</div>
</div>
</div>


    <div id="disqus_thread"></div>
    <h4>Comments</h4>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'chrisdevblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
            </div>
        </div>
        <a href="#" class="scrollup">Scroll</a>
</div> 
 <!-- End Main Content -->


<!-- Footer -->
<div id="footer">
    <footer class="row">
            <div class="large-3 medium-3 small-6 columns">
                <h6>Site Map</h6>
                <ul>
                <li><a href="http://blog.chrisdev.com/archives.html">Archives</a></li>
                <li><a href="http://blog.chrisdev.com/tags.html">Tags</a></li>
                <li><a href="http://blog.chrisdev.com/categories.html">Categories</a></li>
                </ul>
            </div>
            <div class="large-3 medium-3 small-6 columns">
                <h6>Categories</h6>
                    <ul>
                        <li><a href="http://blog.chrisdev.com/category/pelican.html">pelican</a></li>
                        <li><a href="http://blog.chrisdev.com/category/python.html">python</a></li>
                        <li><a href="http://blog.chrisdev.com/category/zurb-foundation.html">Zurb Foundation</a></li>
                    </ul>
 
            </div>
            <div class="large-3 medium-3 small-6 columns">
                    <h6>Links</h6>
                    <ul>
                            <li><a href="http://chrisdev.com/about/">About</a></li>
                            <li><a href="http://chrisdev.com/contact/">Contact Us</a></li>
                    </ul>
 
            </div>
            <div class="large-3 medium-3 small-6 columns">
                    <h6>Social</h6>
                    <ul>
                            <li><a href="http://twitter.com/realchrisdev"><i class="fa fa-twitter"></i>&nbsp;twitter</a></li>
                            <li><a href="https://github.com/chrisdev"><i class="fa fa-github"></i>&nbsp;github</a></li>
                            <li><a href="http://www.facebook.com/chrisdevtt"><i class="fa fa-facebook"></i>&nbsp;facebook</a></li>
                            <li><a href="/feeds/all.atom.xml"><i class="fa fa-"></a></li>
 
                    </ul>
            </div>
            <hr>
            <div class="large-6 medium-6 columns">
<ul id="hcard-cclarke@chrisdev.com" class="info">
    <li class="name">
<a href="http://chrisdev.com" class="url"><span class="given-name">Christopher</span>&nbsp;<span class="family-name">Clarke&nbsp;</span></a>    </li>
    
    
<li class="adr">
   <ul>
<li class="street-address">A3 St Bendicts Gardens</li><li class="locality">Tunapuna</li>        <li class="country-name">
            Trinidad and Tobago
        </li>
 </ul>
</li>        <li class="email"><i class="fa fa-envelope"></i> Email : <a href="mailto:cclarke@chrisdev.com">cclarke@chrisdev.com</a><li/>
        <li class="tel"><i class="fa fa-phone"></i> Phone (home) : 773-4644</li>
</ul>
                </ul>                                                                            
            </div>
            <div id ="colophon" class="large-6 medium-6 hide-for-small columns">
<h6><strong>Colophon</strong></h6> 
<p> This site is made with <a href="http://python.org">Python</a> using the 
<a href="http://pypi.python.org/pypi/pelican/">Pelican static site generator</a>.
This theme is <a href="http://github.com/chrisdev/pelican-transcend-foundation">Transcend Foundation</a>
by <a href="http://github.com/chrisdev">Christopher Clarke</a> 
and <a href="http://github.com/ilendl2">Lendl Smith</a> for Chrisdev
</p>
            </div>
    </footer>
</div>
<script src="http://blog.chrisdev.com/theme/js/vendor/jquery.js"></script>
<script src="http://blog.chrisdev.com/theme/js/foundation.min.js"></script>
<script>
 $(document).foundation();

  function validateForm(query){
                return (query.length > 0);
            }
</script>
<script>
$(document).ready(function () {
    $(window).scroll(function () {if ($(this).scrollTop() > 100) { $('.scrollup').fadeIn();} else {$('.scrollup').fadeOut();}});
    $('.scrollup').click(function () {$("html, body").animate({scrollTop: 0}, 600);return false;});});
</script>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'chrisdevblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</body>